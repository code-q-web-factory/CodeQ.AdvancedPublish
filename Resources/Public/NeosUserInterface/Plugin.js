(()=>{var F=Object.create;var p=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(e&&(t=e(e=0)),t);var i=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var H=(e,t,s,d)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of K(t))!U.call(e,n)&&n!==s&&p(e,n,{get:()=>t[n],enumerable:!(d=G(t,n))||d.enumerable});return e};var a=(e,t,s)=>(s=e!=null?F(M(e)):{},H(t||!e||!e.__esModule?p(s,"default",{value:e,enumerable:!0}):s,e));function r(e){return(...t)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...t);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var o=j(()=>{});var b=i((ge,g)=>{o();g.exports=r("vendor")().ReactDOM});var y=i((Ae,A)=>{o();A.exports=r("vendor")().React});var _=i((Pe,P)=>{o();P.exports=r("vendor")().reduxSagaEffects});var x=i((Oe,O)=>{o();O.exports=r("NeosProjectPackages")().NeosUiReduxStore});var E=i((Ce,C)=>{o();C.exports=r("vendor")().reduxActions});var N=i((De,I)=>{o();I.exports=r("vendor")().reactRedux});o();var h=r("manifest");var L=a(b()),l=a(y()),c=a(_()),u=a(x());var f=a(E()),v={TOGGLE_ADVANCED_PUBLISH_DIALOG:"CodeQ.AdvancedPublish/TOGGLE_ADVANCED_PUBLISH_DIALOG"},V=(0,f.createAction)(v.TOGGLE_ADVANCED_PUBLISH_DIALOG),D={toggleAdvancedPublishDialog:V},w=(0,f.handleActions)({[v.TOGGLE_ADVANCED_PUBLISH_DIALOG]:(e,t)=>({...e,plugins:{...e.plugins,advancedPublishDialog:{open:t.payload!==void 0?t.payload.open:!e.plugins?.advancedPublishDialog?.open}}})},{plugins:{advancedPublishDialog:{open:!1}}}),S={advancedPublishDialogOpen:e=>e.plugins?.advancedPublishDialog?.open};var R=a(N()),T=({open:e,iframeUri:t})=>e?l.createElement("iframe",{style:{width:"100%",height:"100%",position:"absolute",zIndex:"999999",top:"0",background:"#000",border:"0"},src:t}):"",B=(0,R.connect)(e=>({open:S.advancedPublishDialogOpen(e)}))(T);h("CodeQ.AdvancedPublish",{},(e,{store:t,frontendConfiguration:s})=>{function*d(){yield(0,c.takeLatest)(u.actionTypes.CR.Workspaces.PUBLISH,function*(){let{payload:n}=yield(0,c.take)(u.actionTypes.ServerFeedback.HANDLE_SERVER_FEEDBACK);if(!n.feedbackEnvelope.feedbacks.some(W=>W.type==="Neos.Neos.Ui:Success")){console.warn("CodeQ.AdvancedPublish :: Publishing doesnt seem to have been successful. Aborting.");return}yield(0,c.put)(D.toggleAdvancedPublishDialog())})}e.get("containers").set("Modals/CodeQ.AdvancedPublish",()=>L.createPortal(l.createElement(B,{iframeUri:s["CodeQ.AdvancedPublish"].iframeUri}),document.body)),e.get("sagas").set("CodeQ.AdvancedPublish/afterPublish",{saga:d}),e.get("reducers").set("CodeQ.AdvancedPublish",{reducer:w})});})();
//# sourceMappingURL=Plugin.js.map
